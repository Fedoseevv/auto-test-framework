<h1 style="text-align: center">Библиотека "Автотесты"</h1>
<h2>Краткое описание:</h2>
<p>Данный проект содержит класс, реализующий проверку входных данных на основании предоставленных SQL-запросов и .sql файлов, содержащих данные в формате CSV</p>
<p>Все методы, реализованные в классе, принимают на вход два строковых параметра (пути до SQL-файлов источника внутри директории resources (далее source) и ожидаемого результата (далее target)).</p>
<p>Все данные для тестирования содержатся в директории src/main/resources, названия файлов соответствуют следующему паттерну:<br>
<code style="font-size: 14px; font-weight: 700; margin-left: 50px;">test_< номер теста >_< source|target >_< counts|arrays|ddl|constants >.sql</code></p>
<h2>Кейсы тестирования:</h2>
<ol>
    <li>Тестирование количества строк на источнике (в прототипе и витрине). Два sql-запроса должны выдать одинаковый результат</li>
    <li>Тестирование по атрибутам n-го количества строк в витрине с результатом прототипа. В этом подходе также два sql-запроса, один к витрине, второй к источнику, они должны выдать одинаковый результат</li>
    <li>Тестирование структуры данных. Приложенный DDL должен равняться результату describe витрины</li>
    <li>Тестирование данных в витрине/столбце с набором констант. Например, максимальный report_dt должен быть равен какому-то значению</li>
</ol>
<h2>Описание класса:</h2>
<p>
    В классе AutoTest реализованы 4 основные метода тестирования:
    <ul>
        <li><strong>isEqualCounts</strong> - первый кейс тестирования</li>
        <li><strong>isEqualDF</strong> - второй кейс тестирования</li>
        <li><strong>isEqualSchemas</strong> - третий кейс тестирования</li>
        <li><strong>isCurrentConstants</strong>  - четвертый кейс тестирования</li>
    </ul>

<p>Также класс содержит приватный метод <code>logTest</code>, который используется методами тестирования для формирования отчетности по пройденным тестам. Данный метод записывает в приватное поле класса <code>results</code> названия тестов (номер теста и какой метод использовался при тестировании) и результат тестирования <code>true</code> - тест пройден успешно, в противном случае <code>текстовое сообщение</code> с информацией о том, почему тест завершился неудачно.</p>
<p>В классе реализован метод <code>parseResult</code>, при вызове которого происходит проверка сформированной переменной <code>results</code>, метод выводит название теста и его результат (<code>Success</code> или <code>Сообщение с причиной ошибки</code>), после чего, в случае, если есть хотя бы один неуспешный тест, данный метод "выбрасывает" исключение, название которого содержит результаты всех тестов, а также список "провальных" тестов.</p>
<p>Метод <code>getTestName</code> используется для получения названия теста из пути к файлу. В дальнейшем это имя используется при отображении результатов тестирования.</p>
<p>Также в классе реализован метод <code>readDdlFromResource</code>, который используется в тесте <code>isEqualSchemas</code> для чтения из ресурсов файла, содержащего DDL таблицы в формате csv. </p>
<p>Методы <code>start</code> и <code>startTestingOnCluster</code> используются для автоматического запуска всех тестов, находящихся в директории <code>src/main/resources</code>. Первый метод используется для запуска локально, второй - для запуска в контуре.</p>
<p>Также дополнительно в классе реализован метод <code>isEqualDataframes</code>, который сравнивает результаты двух sql-запросов на совпадение</p>

<h1 style="text-align: center">Краткий "how to use"</h1>

